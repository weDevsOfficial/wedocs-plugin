document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".wp-block-wedocs-table-of-contents").forEach(function(t){t.querySelector(".toc-content"),t.querySelector(".toc-list"),t.querySelector(".toc-title");const e=t.classList.contains("smooth-scroll")||"true"===t.dataset.smoothScroll,n=t.classList.contains("collapsible-mobile")||window.innerWidth<=768;e&&document.documentElement.classList.add("smooth-scroll"),function(t){const e=function(t){const e=t.dataset.supportedHeadings;if(e)try{return JSON.parse(e)}catch(t){console.warn("Invalid supportedHeadings data:",e)}return["H2","H3"]}(t),n="false"!==t.dataset.showHierarchy,o="true"===t.dataset.showNumbering,c=document.querySelector(".entry-content, .post-content, main, .content")||document.body,i=e.map(t=>t.toLowerCase()).join(", "),r=c.querySelectorAll(i);if(0===r.length)return void(t.querySelector(".toc-content").innerHTML='<div class="toc-empty-state"><p>No headings found in the content.</p></div>');const l=function(t,e,n,o){let c='<ul class="toc-list';c+=n?" hierarchical":" flat",c+=o?" numbered":" bulleted",c+='">';const i={1:0,2:0,3:0,4:0,5:0};let r=1;return t.forEach(function(e){const l=parseInt(e.tagName.charAt(1)),s=e.textContent.trim(),a=e.id||"toc-heading-"+Array.from(t).indexOf(e);if(o)if(n){i[l]++;for(let t=l+1;t<=5;t++)i[t]=0}else i[l]=r++;const u=n?20*(l-2):0;let d="";if(o)if(n){const t=[];for(let e=2;e<=l;e++)i[e]>0&&t.push(i[e]);d=t.join(".")+". "}else d=i[l]+". ";c+='<li style="margin-left: '+u+'px">',c+='<a href="#'+a+'" class="toc-link">',o&&(c+='<span class="toc-number">'+d+"</span>"),c+=s,c+="</a></li>"}),c+="</ul>",c}(r,0,n,o);t.querySelector(".toc-content").innerHTML=l,r.forEach(function(t,e){t.id||(t.id="toc-heading-"+e)})}(t),n&&window.innerWidth<=768&&function(t){t.classList.add("collapsible-mobile");const e=t.querySelector(".toc-title"),n=t.querySelector(".toc-content");e&&n&&e.addEventListener("click",function(){e.classList.toggle("collapsed"),n.classList.toggle("collapsed")})}(t),function(t){const e=t.querySelectorAll(".toc-link"),n=Array.from(e).map(function(t){const e=t.getAttribute("href").substring(1);return document.getElementById(e)}).filter(Boolean);if(0===n.length)return;function o(){const t=window.scrollY+100;let o=null;n.forEach(function(e){e.offsetTop<=t&&(o=e)}),e.forEach(function(t){t.classList.remove("active"),o&&t.getAttribute("href")==="#"+o.id&&t.classList.add("active")})}let c=!1;window.addEventListener("scroll",function(){c||(requestAnimationFrame(function(){o(),c=!1}),c=!0)}),o()}(t),function(t,e){t.querySelectorAll(".toc-link").forEach(function(t){t.addEventListener("click",function(n){n.preventDefault();const o=t.getAttribute("href").substring(1),c=document.getElementById(o);if(c){const t=c.offsetTop-80;e&&"scrollBehavior"in document.documentElement.style?window.scrollTo({top:t,behavior:"smooth"}):function(t){const e=window.scrollY,n=t-e,o=performance.now();requestAnimationFrame(function t(c){const i=c-o,r=Math.min(i/600,1),l=(s=r)<.5?2*s*s:(4-2*s)*s-1;var s;window.scrollTo(0,e+n*l),r<1&&requestAnimationFrame(t)})}(t)}})})}(t,e)})});