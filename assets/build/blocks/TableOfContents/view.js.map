{"version":3,"file":"blocks/TableOfContents/view.js","mappings":"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","sources":["webpack://weDocs/./src/blocks/TableOfContents/view.js"],"sourcesContent":["\n  /**\n * Frontend JavaScript for Dynamic Table of Contents block\n */\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\tconst tocBlocks = document.querySelectorAll('.wp-block-wedocs-table-of-contents');\n\n\ttocBlocks.forEach(function(tocBlock) {\n\t\tconst tocContent = tocBlock.querySelector('.toc-content');\n\t\tconst tocList = tocBlock.querySelector('.toc-list');\n\t\tconst tocTitle = tocBlock.querySelector('.toc-title');\n\n\t\t// Get block attributes from data attributes or classes\n\t\tconst smoothScroll = tocBlock.classList.contains('smooth-scroll') || tocBlock.dataset.smoothScroll === 'true';\n\t\tconst collapsibleOnMobile = tocBlock.classList.contains('collapsible-mobile') || window.innerWidth <= 768;\n\n\t\t// Enable smooth scrolling if requested\n\t\tif (smoothScroll) {\n\t\t\tdocument.documentElement.classList.add('smooth-scroll');\n\t\t}\n\n\t\t// Generate TOC from page headings\n\t\tgenerateTOC(tocBlock);\n\n\t\t// Setup mobile collapsible behavior\n\t\tif (collapsibleOnMobile && window.innerWidth <= 768) {\n\t\t\tsetupMobileCollapsible(tocBlock);\n\t\t}\n\n\t\t// Setup scroll spy for active highlighting\n\t\tsetupScrollSpy(tocBlock);\n\n\t\t// Setup smooth scrolling for TOC links\n\t\tsetupSmoothScrolling(tocBlock, smoothScroll);\n\t});\n\n\t/**\n\t * Generate TOC from page headings\n\t */\n\tfunction generateTOC(tocBlock) {\n\t\tconst supportedHeadings = getSupportedHeadings(tocBlock);\n\t\tconst showHierarchy = tocBlock.dataset.showHierarchy !== 'false';\n\t\tconst showNumbering = tocBlock.dataset.showNumbering === 'true';\n\n\t\t// Find all headings in the page content\n\t\tconst contentArea = document.querySelector('.entry-content, .post-content, main, .content') || document.body;\n\t\tconst headingSelector = supportedHeadings.map(h => h.toLowerCase()).join(', ');\n\t\tconst headings = contentArea.querySelectorAll(headingSelector);\n\n\t\tif (headings.length === 0) {\n\t\t\tconst tocContent = tocBlock.querySelector('.toc-content');\n\t\t\ttocContent.innerHTML = '<div class=\"toc-empty-state\"><p>No headings found in the content.</p></div>';\n\t\t\treturn;\n\t\t}\n\n\t\t// Generate TOC HTML\n\t\tconst tocHTML = generateTOCHTML(headings, supportedHeadings, showHierarchy, showNumbering);\n\t\tconst tocContent = tocBlock.querySelector('.toc-content');\n\t\ttocContent.innerHTML = tocHTML;\n\n\t\t// Add IDs to headings if they don't have them\n\t\theadings.forEach(function(heading, index) {\n\t\t\tif (!heading.id) {\n\t\t\t\theading.id = 'toc-heading-' + index;\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Get supported heading levels from block attributes\n\t */\n\tfunction getSupportedHeadings(tocBlock) {\n\t\tconst supportedAttr = tocBlock.dataset.supportedHeadings;\n\t\tif (supportedAttr) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(supportedAttr);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn('Invalid supportedHeadings data:', supportedAttr);\n\t\t\t}\n\t\t}\n\t\treturn ['H2', 'H3']; // Default\n\t}\n\n\t/**\n\t * Generate TOC HTML from headings\n\t */\n\tfunction generateTOCHTML(headings, supportedHeadings, showHierarchy, showNumbering) {\n\t\tlet html = '<ul class=\"toc-list';\n\t\thtml += showHierarchy ? ' hierarchical' : ' flat';\n\t\thtml += showNumbering ? ' numbered' : ' bulleted';\n\t\thtml += '\">';\n\n\t\tconst counters = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\n\t\tlet globalCounter = 1;\n\n\t\theadings.forEach(function(heading) {\n\t\t\tconst level = parseInt(heading.tagName.charAt(1));\n\t\t\tconst text = heading.textContent.trim();\n\t\t\tconst id = heading.id || 'toc-heading-' + Array.from(headings).indexOf(heading);\n\n\t\t\t// Update counters\n\t\t\tif (showNumbering) {\n\t\t\t\tif (showHierarchy) {\n\t\t\t\t\tcounters[level]++;\n\t\t\t\t\t// Reset lower level counters\n\t\t\t\t\tfor (let i = level + 1; i <= 5; i++) {\n\t\t\t\t\t\tcounters[i] = 0;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcounters[level] = globalCounter++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Calculate indent for hierarchy\n\t\t\tconst indent = showHierarchy ? (level - 2) * 20 : 0;\n\n\t\t\t// Generate number text\n\t\t\tlet numberText = '';\n\t\t\tif (showNumbering) {\n\t\t\t\tif (showHierarchy) {\n\t\t\t\t\tconst numbers = [];\n\t\t\t\t\tfor (let i = 2; i <= level; i++) {\n\t\t\t\t\t\tif (counters[i] > 0) {\n\t\t\t\t\t\t\tnumbers.push(counters[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnumberText = numbers.join('.') + '. ';\n\t\t\t\t} else {\n\t\t\t\t\tnumberText = counters[level] + '. ';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml += '<li style=\"margin-left: ' + indent + 'px\">';\n\t\t\thtml += '<a href=\"#' + id + '\" class=\"toc-link\">';\n\t\t\tif (showNumbering) {\n\t\t\t\thtml += '<span class=\"toc-number\">' + numberText + '</span>';\n\t\t\t}\n\t\t\thtml += text;\n\t\t\thtml += '</a></li>';\n\t\t});\n\n\t\thtml += '</ul>';\n\t\treturn html;\n\t}\n\n\t/**\n\t * Setup mobile collapsible behavior\n\t */\n\tfunction setupMobileCollapsible(tocBlock) {\n\t\ttocBlock.classList.add('collapsible-mobile');\n\t\tconst title = tocBlock.querySelector('.toc-title');\n\t\tconst content = tocBlock.querySelector('.toc-content');\n\n\t\tif (title && content) {\n\t\t\ttitle.addEventListener('click', function() {\n\t\t\t\ttitle.classList.toggle('collapsed');\n\t\t\t\tcontent.classList.toggle('collapsed');\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Setup scroll spy for active highlighting\n\t */\n\tfunction setupScrollSpy(tocBlock) {\n\t\tconst links = tocBlock.querySelectorAll('.toc-link');\n\t\tconst headings = Array.from(links).map(function(link) {\n\t\t\tconst id = link.getAttribute('href').substring(1);\n\t\t\treturn document.getElementById(id);\n\t\t}).filter(Boolean);\n\n\t\tif (headings.length === 0) return;\n\n\t\tfunction updateActiveLink() {\n\t\t\tconst scrollPos = window.scrollY + 100; // Offset for better UX\n\t\t\tlet activeHeading = null;\n\n\t\t\t// Find the active heading\n\t\t\theadings.forEach(function(heading) {\n\t\t\t\tif (heading.offsetTop <= scrollPos) {\n\t\t\t\t\tactiveHeading = heading;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Update active states\n\t\t\tlinks.forEach(function(link) {\n\t\t\t\tlink.classList.remove('active');\n\t\t\t\tif (activeHeading && link.getAttribute('href') === '#' + activeHeading.id) {\n\t\t\t\t\tlink.classList.add('active');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Throttle scroll events\n\t\tlet ticking = false;\n\t\twindow.addEventListener('scroll', function() {\n\t\t\tif (!ticking) {\n\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\tupdateActiveLink();\n\t\t\t\t\tticking = false;\n\t\t\t\t});\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t});\n\n\t\t// Initial update\n\t\tupdateActiveLink();\n\t}\n\n\t/**\n\t * Setup smooth scrolling for TOC links\n\t */\n\tfunction setupSmoothScrolling(tocBlock, smoothScroll) {\n\t\tconst links = tocBlock.querySelectorAll('.toc-link');\n\n\t\tlinks.forEach(function(link) {\n\t\t\tlink.addEventListener('click', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tconst targetId = link.getAttribute('href').substring(1);\n\t\t\t\tconst targetElement = document.getElementById(targetId);\n\n\t\t\t\tif (targetElement) {\n\t\t\t\t\tconst offsetTop = targetElement.offsetTop - 80; // Account for sticky headers\n\n\t\t\t\t\tif (smoothScroll && 'scrollBehavior' in document.documentElement.style) {\n\t\t\t\t\t\twindow.scrollTo({\n\t\t\t\t\t\t\ttop: offsetTop,\n\t\t\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Fallback smooth scroll\n\t\t\t\t\t\tanimateScrollTo(offsetTop, 600);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Fallback smooth scroll animation\n\t */\n\tfunction animateScrollTo(to, duration) {\n\t\tconst start = window.scrollY;\n\t\tconst change = to - start;\n\t\tconst startTime = performance.now();\n\n\t\tfunction animateScroll(currentTime) {\n\t\t\tconst elapsed = currentTime - startTime;\n\t\t\tconst progress = Math.min(elapsed / duration, 1);\n\t\t\tconst ease = easeInOutQuad(progress);\n\n\t\t\twindow.scrollTo(0, start + change * ease);\n\n\t\t\tif (progress < 1) {\n\t\t\t\trequestAnimationFrame(animateScroll);\n\t\t\t}\n\t\t}\n\n\t\trequestAnimationFrame(animateScroll);\n\t}\n\n\t/**\n\t * Easing function for smooth animation\n\t */\n\tfunction easeInOutQuad(t) {\n\t\treturn t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n\t}\n});\n"],"names":["document","addEventListener","tocBlocks","querySelectorAll","forEach","tocBlock","tocContent","querySelector","tocList","tocTitle","smoothScroll","classList","contains","dataset","collapsibleOnMobile","window","innerWidth","documentElement","add","generateTOC","setupMobileCollapsible","setupScrollSpy","setupSmoothScrolling","supportedHeadings","getSupportedHeadings","showHierarchy","showNumbering","contentArea","body","headingSelector","map","h","toLowerCase","join","headings","length","innerHTML","tocHTML","generateTOCHTML","heading","index","id","supportedAttr","JSON","parse","e","console","warn","html","counters","globalCounter","level","parseInt","tagName","charAt","text","textContent","trim","Array","from","indexOf","i","indent","numberText","numbers","push","title","content","toggle","links","link","getAttribute","substring","getElementById","filter","Boolean","updateActiveLink","scrollPos","scrollY","activeHeading","offsetTop","remove","ticking","requestAnimationFrame","preventDefault","targetId","targetElement","style","scrollTo","top","behavior","animateScrollTo","to","duration","start","change","startTime","performance","now","animateScroll","currentTime","elapsed","progress","Math","min","ease","easeInOutQuad","t"],"sourceRoot":""}