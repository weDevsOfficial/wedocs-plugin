{"version":3,"file":"editor.js","mappings":"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","sources":["webpack://weDocs/./src/editor/AiDocWriter.js","webpack://weDocs/./src/editor/AiDocWriterModal.js","webpack://weDocs/./src/editor/AiDocWriterPanel.js","webpack://weDocs/./src/editor/AiDocWriterPreview.js","webpack://weDocs/./src/icons/index.js","webpack://weDocs/./src/utils/aiService.js","webpack://weDocs/external window \"React\"","webpack://weDocs/external window [\"wp\",\"blockEditor\"]","webpack://weDocs/external window [\"wp\",\"blocks\"]","webpack://weDocs/external window [\"wp\",\"components\"]","webpack://weDocs/external window [\"wp\",\"coreData\"]","webpack://weDocs/external window [\"wp\",\"data\"]","webpack://weDocs/external window [\"wp\",\"editPost\"]","webpack://weDocs/external window [\"wp\",\"editor\"]","webpack://weDocs/external window [\"wp\",\"element\"]","webpack://weDocs/external window [\"wp\",\"i18n\"]","webpack://weDocs/external window [\"wp\",\"plugins\"]","webpack://weDocs/webpack/bootstrap","webpack://weDocs/webpack/runtime/compat get default export","webpack://weDocs/webpack/runtime/define property getters","webpack://weDocs/webpack/runtime/hasOwnProperty shorthand","webpack://weDocs/webpack/runtime/make namespace object"],"sourcesContent":["import { registerPlugin } from '@wordpress/plugins';\nimport AiDocWriterIcon from '../icons';\nimport AiDocWriterPanel from './AiDocWriterPanel';\n\nregisterPlugin('wedocs-ai-doc-writer', {\n    icon: AiDocWriterIcon,\n    render: AiDocWriterPanel,\n});\n","import { __ } from '@wordpress/i18n';\nimport { useState, useEffect, useMemo } from '@wordpress/element';\nimport {\n    Modal,\n    Button,\n    TextControl,\n    TextareaControl,\n    ToggleControl,\n    Notice,\n    Spinner,\n    PanelBody,\n    PanelRow,\n    Card,\n    CardBody,\n    CardHeader,\n    Flex,\n    FlexItem,\n    __experimentalHStack as HStack,\n    __experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\nimport AiDocWriterPreview from './AiDocWriterPreview';\nimport aiService from '../utils/aiService';\n\nconst AiDocWriterModal = ({ isOpen, onClose }) => {\n    const [title, setTitle] = useState('');\n    const [prompt, setPrompt] = useState('');\n    const [keywords, setKeywords] = useState('');\n    const [overwriteContent, setOverwriteContent] = useState(false);\n    const [useExistingContent, setUseExistingContent] = useState(true);\n    const [isGenerating, setIsGenerating] = useState(false);\n    const [generatedContent, setGeneratedContent] = useState('');\n    const [showPreview, setShowPreview] = useState(false);\n    const [error, setError] = useState('');\n\n    // WordPress editor dispatch hooks\n    const { insertBlocks, replaceBlocks, insertDefaultBlock } = useDispatch(blockEditorStore);\n    const { editPost } = useDispatch(editorStore);\n\n    // Get current post data and editor state with enhanced cursor detection\n    const editorData = useSelect((select) => {\n        const { getCurrentPost, getEditedPostContent } = select('core/editor');\n        const { \n            getSelectedBlockClientId, \n            getBlocks, \n            getSelectedBlock,\n            getBlockInsertionPoint,\n            getBlockOrder\n        } = select('core/block-editor');\n        \n        return {\n            post: getCurrentPost(),\n            content: getEditedPostContent(),\n            selectedBlockClientId: getSelectedBlockClientId(),\n            blocks: getBlocks(),\n            selectedBlock: getSelectedBlock(),\n            insertionPoint: getBlockInsertionPoint(),\n            blockOrder: getBlockOrder()\n        };\n    }, []);\n\n    // Create stable references using useMemo\n    const { currentPost, selectedBlockId, blocks, cursorPosition } = useMemo(() => {\n        const post = editorData.post;\n        const content = editorData.content;\n        const selectedBlockClientId = editorData.selectedBlockClientId;\n        const blocks = editorData.blocks || [];\n        const selectedBlock = editorData.selectedBlock;\n        const insertionPoint = editorData.insertionPoint;\n        const blockOrder = editorData.blockOrder || [];\n        \n        return {\n            currentPost: {\n                id: post?.id || null,\n                title: post?.title || '',\n                contentRaw: content || '',\n                contentRendered: content || ''\n            },\n            selectedBlockId: selectedBlockClientId || null,\n            blocks: blocks,\n            cursorPosition: {\n                selectedBlock: selectedBlock,\n                insertionPoint: insertionPoint,\n                blockOrder: blockOrder,\n                hasSelection: !!selectedBlockClientId,\n                selectedBlockIndex: selectedBlock ? blockOrder.indexOf(selectedBlock.clientId) : -1\n            }\n        };\n    }, [editorData]);\n\n    // Pre-fill title with current post title\n    useEffect(() => {\n        if (currentPost?.title && !title) {\n            setTitle(currentPost.title);\n        }\n    }, [currentPost]);\n\n    // Generate dynamic prompt from title and keywords\n    const generateDynamicPrompt = (docTitle, docKeywords) => {\n        if (!docTitle && !docKeywords) {\n            return __(\n                \"Generate documentation using HTML heading tags for the title. Include details on {Documentation Keywords} and wrap all content in <p> tags. Highlight headings and keywords with <span class='highlight'>.\",\n                'wedocs'\n            );\n        }\n\n        let dynamicPrompt = __(\n            \"Generate documentation using HTML heading tags for '{title}'. Include relevant details on {keywords} in the documentation. Wrap all content in <p> tags. Highlight headings and keywords with <span class='highlight'>.\",\n            'wedocs'\n        );\n\n        // Replace placeholders with actual values\n        if (docTitle) {\n            dynamicPrompt = dynamicPrompt.replace('{title}', docTitle);\n        } else {\n            dynamicPrompt = dynamicPrompt.replace(\"for '{title}'\", 'for the title');\n        }\n\n        if (docKeywords) {\n            dynamicPrompt = dynamicPrompt.replace('{keywords}', docKeywords);\n        } else {\n            dynamicPrompt = dynamicPrompt.replace('Include relevant details on {keywords} in the documentation.', 'Include relevant details in the documentation.');\n        }\n\n        return dynamicPrompt;\n    };\n\n    // Update prompt when title or keywords change\n    useEffect(() => {\n        const dynamicPrompt = generateDynamicPrompt(title, keywords);\n        setPrompt(dynamicPrompt);\n    }, [title, keywords]);\n\n    // Clean AI-generated content\n    const cleanGeneratedContent = (content) => {\n        if (!content) return content;\n        \n        // Remove HTML document structure\n        let cleaned = content\n            .replace(/```html\\s*/gi, '') // Remove markdown code blocks\n            .replace(/```\\s*/g, '') // Remove closing code blocks\n            .replace(/<!DOCTYPE[^>]*>/gi, '') // Remove DOCTYPE\n            .replace(/<html[^>]*>/gi, '') // Remove html tag\n            .replace(/<\\/html>/gi, '') // Remove closing html tag\n            .replace(/<head[^>]*>[\\s\\S]*?<\\/head>/gi, '') // Remove head section\n            .replace(/<body[^>]*>/gi, '') // Remove body opening tag\n            .replace(/<\\/body>/gi, '') // Remove body closing tag\n            .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '') // Remove style blocks\n            .replace(/<title[^>]*>[\\s\\S]*?<\\/title>/gi, '') // Remove title\n            .replace(/<meta[^>]*>/gi, '') // Remove meta tags\n            .trim();\n        \n        return cleaned;\n    };\n\n    // Validate AI-generated content\n    const validateGeneratedContent = (content) => {\n        const errors = [];\n\n        // Check if content is empty\n        if (!content || content.trim().length === 0) {\n            errors.push(__('Generated content is empty.', 'wedocs'));\n            return { isValid: false, errors };\n        }\n\n        // Check for basic HTML structure\n        const hasParagraphs = /<p[^>]*>.*?<\\/p>/i.test(content);\n        const hasHeadings = /<h[1-6][^>]*>.*?<\\/h[1-6]>/i.test(content);\n\n        if (!hasParagraphs && !hasHeadings) {\n            errors.push(__('Generated content should contain at least paragraphs or headings.', 'wedocs'));\n        }\n\n\n        // Check for potentially dangerous HTML (basic XSS prevention)\n        const dangerousPatterns = [\n            /<script[^>]*>.*?<\\/script>/gi,\n            /<iframe[^>]*>.*?<\\/iframe>/gi,\n            /javascript:/gi,\n            /on\\w+\\s*=/gi\n        ];\n\n        for (const pattern of dangerousPatterns) {\n            if (pattern.test(content)) {\n                errors.push(__('Generated content contains potentially unsafe HTML elements.', 'wedocs'));\n                break;\n            }\n        }\n\n        // Check for minimum content length\n        const textContent = content.replace(/<[^>]*>/g, '').trim();\n        if (textContent.length < 50) {\n            errors.push(__('Generated content is too short. Please try again with more specific keywords.', 'wedocs'));\n        }\n\n        // Check for maximum content length (prevent extremely long content)\n        if (textContent.length > 10000) {\n            errors.push(__('Generated content is too long. Please try again with more focused keywords.', 'wedocs'));\n        }\n\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    };\n\n\n    const handleGenerate = async () => {\n        if (!title.trim()) {\n            setError(__('Please enter a documentation title.', 'wedocs'));\n            return;\n        }\n\n        if (!keywords.trim()) {\n            setError(__('Please enter keywords to guide the AI.', 'wedocs'));\n            return;\n        }\n\n        setError('');\n        setIsGenerating(true);\n\n        try {\n            // Get AI settings to determine provider and model\n            const aiSettings = await aiService.getAiSettings();\n\n            // Check if AI is properly configured\n            if (!aiSettings.providers[aiSettings.default_provider]?.api_key) {\n                setError(__('AI service is not configured. Please set up your AI provider settings in weDocs > Settings > AI Control Settings.', 'wedocs'));\n                return;\n            }\n\n            // Use AI service to generate content\n            let systemPrompt = __(\n                'You are a professional documentation writer. Generate comprehensive, well-structured documentation content using HTML tags. Use proper heading hierarchy (h2, h3, etc.) and wrap all content in paragraph tags. Highlight important terms with <span class=\"highlight\"> tags. IMPORTANT: Only return the content body without HTML document structure (no <!DOCTYPE>, <html>, <head>, <style>, or <body> tags). Return only the content that should be inserted into the document.',\n                'wedocs'\n            );\n\n            // Add existing content context if enabled\n            let enhancedPrompt = prompt;\n            if (useExistingContent && currentPost?.contentRaw) {\n                const existingContentContext = __(\n                    'EXISTING DOCUMENT CONTEXT:\\n{content}\\n\\nPlease generate new content that complements and builds upon the existing content above. Maintain consistency in tone, style, and structure. Avoid duplicating information already covered.',\n                    'wedocs'\n                ).replace('{content}', currentPost.contentRaw);\n                \n                enhancedPrompt = `${existingContentContext}\\n\\n${prompt}`;\n                \n                systemPrompt += ' ' + __(\n                    'Consider the existing document content provided above to maintain consistency and avoid duplication.',\n                    'wedocs'\n                );\n            }\n\n            const selectedModel = aiSettings.providers[aiSettings.default_provider].selected_model;\n\n                const result = await aiService.generateContent(enhancedPrompt, {\n                    provider: aiSettings.default_provider,\n                    model: selectedModel,\n                    feature: 'ai_doc_writer',\n                    systemPrompt: systemPrompt,\n                    maxTokens: 2000,\n                    temperature: 0.7\n                });\n\n\n                if (!result.content) {\n                    throw new Error(__('AI service returned empty content', 'wedocs'));\n                }\n\n                // Clean the generated content\n                const cleanedContent = cleanGeneratedContent(result.content);\n\n            // Validate the generated content\n            const validation = validateGeneratedContent(cleanedContent);\n\n            if (!validation.isValid) {\n                setError(validation.errors.join(' '));\n                return;\n            }\n\n            setGeneratedContent(cleanedContent);\n            setShowPreview(true);\n        } catch (err) {\n            setError(err.message || __('Failed to generate content. Please try again.', 'wedocs'));\n        } finally {\n            setIsGenerating(false);\n        }\n    };\n\n    // Sanitize content for security (following BetterDocs Pro pattern)\n    const sanitizeContent = (content) => {\n        if (!content) return content;\n        \n        // Remove script tags and their contents\n        content = content.replace(/<script[^>]*>.*?<\\/script>/gi, '');\n        \n        // Remove javascript: protocols but keep the anchor tags\n        content = content.replace(/href\\s*=\\s*([\"\\'])\\s*javascript:.*?\\1/gi, 'href=\"#\"');\n        \n        // Remove all event handlers (onclick, onload, etc) but keep the elements\n        content = content.replace(/\\s+on\\w+\\s*=\\s*([\"\\'])?[^\"\\']*\\1?/gi, '');\n        \n        // Remove any inline javascript: in attributes\n        content = content.replace(/javascript\\s*:/gi, '');\n        \n        return content;\n    };\n\n    // Parse HTML content and create appropriate blocks\n    const createContentBlocks = (htmlContent) => {\n        const blocks = [];\n        \n        // Sanitize the content first\n        const sanitizedContent = sanitizeContent(htmlContent);\n        \n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = sanitizedContent;\n        \n        // Process each top-level element\n        Array.from(tempDiv.children).forEach(element => {\n            const tagName = element.tagName.toLowerCase();\n            \n            switch (tagName) {\n                case 'h1':\n                case 'h2':\n                case 'h3':\n                case 'h4':\n                case 'h5':\n                case 'h6':\n                    const level = parseInt(tagName.charAt(1));\n                    blocks.push(createBlock('core/heading', {\n                        content: element.innerHTML,\n                        level: level\n                    }));\n                    break;\n                    \n                case 'p':\n                    blocks.push(createBlock('core/paragraph', {\n                        content: element.innerHTML\n                    }));\n                    break;\n                    \n                case 'ul':\n                case 'ol':\n                    const listType = tagName === 'ul' ? 'ul' : 'ol';\n                    const listItems = Array.from(element.querySelectorAll('li')).map(li => li.innerHTML);\n                    blocks.push(createBlock('core/list', {\n                        values: listItems,\n                        ordered: listType === 'ol'\n                    }));\n                    break;\n                    \n                case 'blockquote':\n                    blocks.push(createBlock('core/quote', {\n                        value: element.innerHTML\n                    }));\n                    break;\n                    \n                default:\n                    // For any other HTML content, use HTML block\n                    blocks.push(createBlock('core/html', {\n                        content: element.outerHTML\n                    }));\n                    break;\n            }\n        });\n        \n        // If no blocks were created (e.g., only text), create a paragraph\n        if (blocks.length === 0) {\n            blocks.push(createBlock('core/paragraph', {\n                content: htmlContent\n            }));\n        }\n        \n        return blocks;\n    };\n\n    const handleAccept = () => {\n        try {\n            // Create blocks from the generated content\n            const contentBlocks = createContentBlocks(generatedContent);\n\n            if (overwriteContent) {\n                // Overwrite Mode: Replace entire post content\n                const blockIds = blocks.map(block => block.clientId).filter(id => id);\n                \n                if (blockIds.length > 0) {\n                    replaceBlocks(blockIds, contentBlocks);\n                } else {\n                    insertBlocks(contentBlocks);\n                }\n            } else {\n                // Insert Mode: Insert at current cursor position\n                // Use reliable method that appends to end of document\n                const currentBlocks = wp.data.select('core/block-editor').getBlocks();\n                const allBlocks = [...currentBlocks, ...contentBlocks];\n                const allBlockIds = currentBlocks.map(block => block.clientId);\n                wp.data.dispatch('core/block-editor').replaceBlocks(allBlockIds, allBlocks);\n            }\n            \n            // Close modal\n            onClose();\n            \n        } catch (error) {\n            setError(__('Failed to insert content. Please try again.', 'wedocs'));\n        }\n    };\n\n    const handleReject = () => {\n        setShowPreview(false);\n        setGeneratedContent('');\n    };\n\n    const handleClose = () => {\n        setShowPreview(false);\n        setGeneratedContent('');\n        setError('');\n        onClose();\n    };\n\n    return (\n        <Modal\n            title={__('AI Doc Writer', 'wedocs')}\n            onRequestClose={handleClose}\n            className=\"wedocs-ai-doc-writer-modal\"\n            size=\"large\"\n        >\n            {!showPreview ? (\n                <VStack spacing={4}>\n                    <Card>\n                        <CardBody>\n                            <VStack spacing={3}>\n                                <TextControl\n                                    label={__('Documentation Title', 'wedocs')}\n                                    value={title}\n                                    onChange={setTitle}\n                                    placeholder={__('Enter your documentation title here...', 'wedocs')}\n                                    help={__('The title will be used to generate relevant content.', 'wedocs')}\n                                    __nextHasNoMarginBottom\n                                    __next40pxDefaultSize\n                                />\n\n                                <TextControl\n                                    label={__('Keywords', 'wedocs')}\n                                    value={keywords}\n                                    onChange={setKeywords}\n                                    placeholder={__('Add keywords to guide AI (comma-separated)...', 'wedocs')}\n                                    help={__('Enter relevant keywords separated by commas.', 'wedocs')}\n                                    __nextHasNoMarginBottom\n                                    __next40pxDefaultSize\n                                />\n\n                                <TextareaControl\n                                    label={__('AI Instructions', 'wedocs')}\n                                    value={prompt}\n                                    onChange={setPrompt}\n                                    rows={4}\n                                    placeholder={__('AI instructions will be auto-generated from title and keywords...', 'wedocs')}\n                                    help={__('Instructions are automatically generated from your title and keywords. You can edit them manually if needed.', 'wedocs')}\n                                    __nextHasNoMarginBottom\n                                />\n\n                                <ToggleControl\n                                    label={__('Use existing post content', 'wedocs')}\n                                    checked={useExistingContent}\n                                    onChange={setUseExistingContent}\n                                    help={__('When enabled, the AI will consider your existing post content to maintain consistency and avoid duplication.', 'wedocs')}\n                                    __nextHasNoMarginBottom\n                                />\n\n                                <ToggleControl\n                                    label={__('Overwrite your existing Doc', 'wedocs')}\n                                    checked={overwriteContent}\n                                    onChange={setOverwriteContent}\n                                    help={__('When enabled, AI content will replace the entire document. When disabled, content will be inserted at the end of the current contents.', 'wedocs')}\n                                    __nextHasNoMarginBottom\n                                />\n                            </VStack>\n                        </CardBody>\n                    </Card>\n\n                    {error && (\n                        <Notice status=\"error\" isDismissible={false}>\n                            {error}\n                        </Notice>\n                    )}\n\n                    <HStack justify=\"flex-end\" spacing={2}>\n                        <Button variant=\"secondary\" onClick={handleClose}>\n                            {__('Cancel', 'wedocs')}\n                        </Button>\n                        <Button\n                            variant=\"primary\"\n                            onClick={handleGenerate}\n                            disabled={isGenerating}\n                        >\n                            {isGenerating ? (\n                                <>\n                                    <Spinner />\n                                    {__('Generating...', 'wedocs')}\n                                </>\n                            ) : (\n                                __('Generate Content', 'wedocs')\n                            )}\n                        </Button>\n                    </HStack>\n                </VStack>\n            ) : (\n                <AiDocWriterPreview\n                    content={generatedContent}\n                    onAccept={handleAccept}\n                    onReject={handleReject}\n                    onClose={handleClose}\n                />\n            )}\n        </Modal>\n    );\n};\n\nexport default AiDocWriterModal;\n","import { __ } from '@wordpress/i18n';\nimport { useState, Fragment } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { Button } from '@wordpress/components';\nimport { PluginSidebar, PluginSidebarMoreMenuItem } from '@wordpress/edit-post';\nimport AiDocWriterIcon from '../icons';\nimport AiDocWriterModal from './AiDocWriterModal';\n\nconst AiDocWriterPanel = () => {\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    // Check if we're in the docs post type\n    const { isViewable, postTypeName } = useSelect((select) => {\n        const postType = select(editorStore).getCurrentPostType();\n        const postTypeObject = select(coreStore).getPostType(postType);\n        return {\n            isViewable: postTypeObject?.viewable,\n            postTypeName: postType,\n        };\n    }, []);\n\n    // Only show for docs post type\n    if (!isViewable || postTypeName !== 'docs') {\n        return null;\n    }\n\n    return (\n        <Fragment>\n            <PluginSidebarMoreMenuItem target=\"wedocs-ai-doc-writer\" icon={AiDocWriterIcon}>\n                {__('AI Doc Writer', 'wedocs')}\n            </PluginSidebarMoreMenuItem>\n            <PluginSidebar name=\"wedocs-ai-doc-writer\" title={__('AI Doc Writer', 'wedocs')}>\n                <div style={{ padding: '16px' }}>\n                    <p style={{ marginBottom: '16px', fontSize: '14px', color: '#666' }}>\n                        {__('Generate AI-powered documentation content with advanced language models.', 'wedocs')}\n                    </p>\n                    \n                    <Button\n                        onClick={() => setIsModalOpen(true)}\n                        variant=\"primary\"\n                        style={{ \n                            width: '100%',\n                            height: '40px',\n                            fontSize: '14px',\n                            fontWeight: '500',\n                            backgroundColor: '#4338CA',\n                            borderColor: '#4338CA'\n                        }}\n                    >\n                        {__('Open AI Doc Writer', 'wedocs')}\n                    </Button>\n                </div>\n            </PluginSidebar>\n\n            {isModalOpen && (\n                <AiDocWriterModal\n                    isOpen={isModalOpen}\n                    onClose={() => setIsModalOpen(false)}\n                />\n            )}\n        </Fragment>\n    );\n};\n\nexport default AiDocWriterPanel;\n","import { __ } from '@wordpress/i18n';\nimport { Button, Notice, Card, CardBody, CardHeader, __experimentalHStack as HStack, __experimentalVStack as VStack } from '@wordpress/components';\n\nconst AiDocWriterPreview = ({ content, onAccept, onReject, onClose }) => {\n    return (\n        <VStack spacing={4}>\n            <Card>\n                <CardBody>\n                    <div \n                        dangerouslySetInnerHTML={{ __html: content }}\n                        style={{\n                            border: '1px solid #ddd',\n                            padding: '16px',\n                            borderRadius: '4px',\n                            backgroundColor: '#f9f9f9',\n                            maxHeight: '400px',\n                            overflowY: 'auto'\n                        }}\n                    />\n                </CardBody>\n            </Card>\n\n            <Notice status=\"info\" isDismissible={false}>\n                {__(\n                    'The content above is formatted with HTML tags. When inserted, it will be properly formatted in your document.',\n                    'wedocs'\n                )}\n            </Notice>\n\n            <HStack justify=\"flex-end\" spacing={2}>\n                <Button\n                    variant=\"tertiary\"\n                    onClick={onClose}\n                >\n                    {__('Cancel', 'wedocs')}\n                </Button>\n                <Button\n                    variant=\"secondary\"\n                    onClick={onReject}\n                >\n                    {__('Reject & Try Again', 'wedocs')}\n                </Button>\n                <Button\n                    variant=\"primary\"\n                    onClick={onAccept}\n                >\n                    {__('Accept & Insert', 'wedocs')}\n                </Button>\n            </HStack>\n        </VStack>\n    );\n};\n\nexport default AiDocWriterPreview;\n","export default <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 22 18\"\n    fill=\"none\"\n>\n    <path\n        d=\"M20.3574 0.120361C21.0356 0.120379 21.5839 0.668752 21.584 1.34692C21.584 1.84677 21.2856 2.27474 20.8574 2.46606V6.36353C21.5099 6.66256 21.9503 7.20505 21.9961 8.0481C21.9985 8.09871 22 8.67906 22 8.72974C22 8.77621 21.999 9.60227 21.999 9.65161C21.931 10.9279 20.9632 11.5184 19.7197 11.6145C18.9403 15.5822 15.3332 17.8801 10.999 17.8801C6.66363 17.8801 3.05521 15.5812 2.27637 11.6116C1.03483 11.4955 0.0707824 10.8026 0.00390625 9.52954C0.00145752 9.48179 0 8.77749 0 8.72974C1.39541e-06 8.68032 0.00145892 8.21911 0.00390625 8.17017C0.0497323 7.32686 0.489827 6.73982 1.14258 6.40552V2.46606C0.715048 2.27453 0.416016 1.84641 0.416016 1.34692C0.416151 0.669965 0.966565 0.120361 1.64355 0.120361C2.32161 0.120549 2.86998 0.668858 2.87012 1.34692C2.87012 1.84713 2.57124 2.27592 2.14258 2.46704V6.10571C2.20844 6.09723 2.27527 6.0913 2.34277 6.08618C3.24165 2.30043 6.77492 0.120405 11 0.120361C15.2243 0.120361 18.7565 2.29975 19.6562 6.08423C19.7241 6.08853 19.7912 6.0936 19.8574 6.10083V2.46606C19.4296 2.27466 19.1309 1.84662 19.1309 1.34692C19.131 0.669966 19.6804 0.120361 20.3574 0.120361ZM11.001 2.0686C7.3014 2.0686 4.27893 4.20979 4.0791 7.85962C4.07241 7.98673 4.06836 8.8722 4.06836 9.00122C4.06836 9.12651 4.07144 10.0059 4.07812 10.1282C4.27139 13.7836 7.29669 15.9319 11 15.9319C14.7032 15.9318 17.7286 13.7835 17.9209 10.1282C17.9285 10.0059 17.9326 9.12651 17.9326 9.00122C17.9326 8.8722 17.9286 7.98673 17.9219 7.85962C17.722 4.20989 14.7004 2.06871 11.001 2.0686ZM7.89746 6.43677C8.61856 6.43677 9.20299 7.02136 9.20312 7.74243C9.20312 8.46362 8.61865 9.0481 7.89746 9.0481C7.17631 9.04806 6.5918 8.4636 6.5918 7.74243C6.59193 7.02138 7.17639 6.43681 7.89746 6.43677ZM14.0977 6.43677C14.8195 6.43692 15.4032 7.0206 15.4033 7.74243C15.4033 8.46437 14.8196 9.04794 14.0977 9.0481C13.3756 9.0481 12.792 8.46446 12.792 7.74243C12.7921 7.02051 13.3757 6.43677 14.0977 6.43677Z\"\n        fill=\"currentColor\"\n    />\n</svg>;\n","/**\n * AI Service Utility\n *\n * Centralized service for managing AI provider integrations\n * and API calls across all AI-powered features in weDocs.\n *\n * Available WordPress Filters:\n *\n * @filter wedocs_ai_service_providers\n * Allows customization of AI service provider configurations including models,\n * base URLs, and provider names for the AI service utility.\n *\n * @since 2.0.0\n */\n\nimport { __ } from '@wordpress/i18n';\n\nclass AiService {\n    constructor() {\n        // Use centralized provider configs from WordPress\n        this.providers = window.weDocsEditorVars?.aiProviderConfigs || {};\n\n        /**\n         * Filter: wedocs_ai_service_providers\n         *\n         * Allows customization of AI service provider configurations including models,\n         * base URLs, and provider names for the AI service utility.\n         *\n         * @param {Object} providers - The providers configuration object\n         * @param {Object} providers.openai - OpenAI provider configuration\n         * @param {string} providers.openai.name - Provider display name\n         * @param {string} providers.openai.baseUrl - API base URL\n         * @param {Object} providers.openai.models - Available models object (key: model_id, value: display_name)\n         * @param {Object} providers.anthropic - Anthropic provider configuration\n         * @param {Object} providers.google - Google Gemini provider configuration\n         *\n         * @example\n         * // Add a new model to OpenAI\n         * wp.hooks.addFilter('wedocs_ai_service_providers', 'my-plugin', function(providers) {\n         *     providers.openai.models['gpt-4-turbo'] = 'GPT-4 Turbo';\n         *     return providers;\n         * });\n         *\n         * @example\n         * // Add a completely new provider\n         * wp.hooks.addFilter('wedocs_ai_service_providers', 'my-plugin', function(providers) {\n         *     providers.custom_provider = {\n         *         name: 'Custom AI Provider',\n         *         baseUrl: 'https://api.custom-provider.com/v1',\n         *         models: {\n         *             'custom-model-1': 'Custom Model 1',\n         *             'custom-model-2': 'Custom Model 2'\n         *         }\n         *     };\n         *     return providers;\n         * });\n         *\n         * @example\n         * // Modify existing provider configuration\n         * wp.hooks.addFilter('wedocs_ai_service_providers', 'my-plugin', function(providers) {\n         *     providers.openai.baseUrl = 'https://custom-openai-proxy.com/v1';\n         *     return providers;\n         * });\n         *\n         * @since 2.0.0\n         */\n        this.providers = wp.hooks.applyFilters('wedocs_ai_service_providers', this.providers);\n    }\n\n    /**\n     * Get AI settings from WordPress\n     */\n    async getAiSettings() {\n        try {\n            const response = await fetch('/wp-json/wp/v2/docs/settings?data=wedocs_settings');\n            const settings = await response.json();\n            return settings?.ai || this.getDefaultAiSettings();\n        } catch (error) {\n            return this.getDefaultAiSettings();\n        }\n    }\n\n    /**\n     * Get default AI settings structure\n     */\n    getDefaultAiSettings() {\n        const providers = {};\n\n        // Generate settings from centralized configs\n        Object.keys(this.providers).forEach(providerKey => {\n            const provider = this.providers[providerKey];\n            const modelKeys = Object.keys(provider.models);\n            const firstModel = modelKeys[0]; // Use first model as default\n\n            providers[providerKey] = {\n                api_key: '',\n                models: modelKeys,\n                selected_model: firstModel\n            };\n\n        });\n\n        return {\n            default_provider: 'openai',\n            providers: providers\n        };\n    }\n\n    /**\n     * Test API connection for a specific provider\n     */\n    async testApiConnection(provider, apiKey, endpoint = null) {\n        try {\n            const providerConfig = this.providers[provider];\n            if (!providerConfig) {\n                throw new Error(__('Invalid provider specified', 'wedocs'));\n            }\n\n            if (!apiKey) {\n                throw new Error(__('API key is required', 'wedocs'));\n            }\n\n\n            const testPayload = this.getTestPayload(provider);\n            const response = await this.makeApiCall(provider, apiKey, endpoint, testPayload);\n\n            return {\n                success: true,\n                message: __('API connection successful', 'wedocs'),\n                response: response\n            };\n        } catch (error) {\n            return {\n                success: false,\n                message: error.message || __('API connection failed', 'wedocs'),\n                error: error\n            };\n        }\n    }\n\n    /**\n     * Generate content using AI\n     */\n    async generateContent(prompt, options = {}) {\n        try {\n            const aiSettings = await this.getAiSettings();\n            const {\n                provider = aiSettings.default_provider,\n                model = null,\n                feature = 'ai_doc_writer'\n            } = options;\n\n            // Get provider and model configuration\n            const providerConfig = aiSettings.providers[provider];\n\n            if (!providerConfig) {\n                throw new Error(__('AI provider not configured', 'wedocs'));\n            }\n\n            const selectedModel = model || providerConfig.selected_model;\n\n            // Make the API call directly via WordPress REST API\n            // Pass prompt and options directly instead of creating provider-specific payloads\n            const restUrl = '/wp-json/wp/v2/docs/ai/generate';\n            const nonce = window.weDocsEditorVars?.nonce || '';\n            \n            const requestBody = {\n                prompt: prompt,\n                provider: provider,\n                model: selectedModel,\n                maxTokens: options.maxTokens || 2000,\n                temperature: options.temperature || 0.7,\n                systemPrompt: options.systemPrompt || __('You are a helpful documentation assistant.', 'wedocs')\n            };\n            \n            const response = await fetch(restUrl, {\n                method: 'POST',\n                credentials: 'include', // Include cookies for authentication\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-WP-Nonce': nonce\n                },\n                body: JSON.stringify(requestBody)\n            });\n\n            if (!response.ok) {\n                let errorData = {};\n                let errorMessage = __('AI content generation failed. Please try again.', 'wedocs');\n\n                try {\n                    const responseText = await response.text();\n\n                    if (responseText.trim().startsWith('{')) {\n                        errorData = JSON.parse(responseText);\n                        // Use the message from the API, which should already be user-friendly\n                        errorMessage = errorData.message || errorData.code || errorMessage;\n                        \n                        // Clean up HTML error messages (WordPress fatal errors)\n                        if (errorMessage.includes('<p>') || errorMessage.includes('critical error')) {\n                            errorMessage = __('A server error occurred. Please try again or contact support if the problem persists.', 'wedocs');\n                        }\n                    } else {\n                        // For non-JSON responses, provide user-friendly message\n                        if (response.status === 500) {\n                            errorMessage = __('A server error occurred. Please try again.', 'wedocs');\n                        } else if (response.status === 403) {\n                            errorMessage = __('You do not have permission to perform this action.', 'wedocs');\n                        } else {\n                            errorMessage = __('An error occurred. Please try again.', 'wedocs');\n                        }\n                    }\n                } catch (parseError) {\n                    // If we can't parse the error, provide a generic user-friendly message\n                    if (response.status === 500) {\n                        errorMessage = __('A server error occurred. Please try again.', 'wedocs');\n                    } else {\n                        errorMessage = __('An error occurred. Please try again.', 'wedocs');\n                    }\n                }\n\n                throw new Error(errorMessage);\n            }\n\n            const data = await response.json();\n            \n            // Return in format expected by callers\n            return {\n                content: data.content || '',\n                usage: data.usage || null\n            };\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    /**\n     * List available models for Google Gemini API\n     */\n    async listGoogleModels(apiKey) {\n        try {\n            const url = `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`;\n\n            const response = await fetch(url, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}));\n                throw new Error(\n                    errorData.error?.message ||\n                    errorData.message ||\n                    __('Failed to list Google models', 'wedocs')\n                );\n            }\n\n            const data = await response.json();\n            return data;\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    /**\n     * Get test payload for API connection testing\n     */\n    getTestPayload(provider) {\n        const testPrompts = {\n            openai: {\n                model: 'gpt-3.5-turbo',\n                messages: [{ role: 'user', content: 'Hello' }],\n                max_tokens: 10\n            },\n            anthropic: {\n                model: 'claude-3-haiku-20240307',\n                max_tokens: 10,\n                messages: [{ role: 'user', content: 'Hello' }]\n            },\n            google: {\n                contents: [{\n                    parts: [{ text: 'Hello' }]\n                }]\n            },\n        };\n\n        return testPrompts[provider] || testPrompts.openai;\n    }\n\n    /**\n     * Prepare payload for content generation\n     */\n    preparePayload(provider, model, prompt, options = {}) {\n        const basePayloads = {\n            openai: {\n                model: model,\n                messages: [\n                    {\n                        role: 'system',\n                        content: options.systemPrompt || __('You are a helpful documentation assistant.', 'wedocs')\n                    },\n                    {\n                        role: 'user',\n                        content: prompt\n                    }\n                ],\n                max_tokens: options.maxTokens || 2000,\n                temperature: options.temperature || 0.7\n            },\n            anthropic: {\n                model: model,\n                max_tokens: options.maxTokens || 2000,\n                messages: [\n                    {\n                        role: 'user',\n                        content: `${options.systemPrompt || __('You are a helpful documentation assistant.', 'wedocs')}\\n\\n${prompt}`\n                    }\n                ]\n            },\n            google: {\n                contents: [{\n                    parts: [{\n                        text: `${options.systemPrompt || __('You are a helpful documentation assistant.', 'wedocs')}\\n\\n${prompt}`\n                    }]\n                }],\n                generationConfig: {\n                    maxOutputTokens: options.maxTokens || 2000,\n                    temperature: options.temperature || 0.7\n                }\n            },\n        };\n\n        const finalPayload = basePayloads[provider] || basePayloads.openai;\n\n        return finalPayload;\n    }\n\n    /**\n     * Make API call to the specified provider via WordPress REST API\n     * This method is kept for backward compatibility with testApiConnection\n     */\n    async makeApiCall(provider, apiKey, endpoint, payload, model = null) {\n        // Extract options from payload (provider-specific payloads vary)\n        const options = this.extractOptionsFromPayload(provider, payload);\n        \n        // Use WordPress REST API endpoint instead of direct API calls\n        const restUrl = '/wp-json/wp/v2/docs/ai/generate';\n        \n        // Get nonce from localized script\n        const nonce = window.weDocsEditorVars?.nonce || '';\n        \n        const response = await fetch(restUrl, {\n            method: 'POST',\n            credentials: 'include', // Include cookies for authentication\n            headers: {\n                'Content-Type': 'application/json',\n                'X-WP-Nonce': nonce\n            },\n            body: JSON.stringify({\n                prompt: options.prompt,\n                provider: provider,\n                model: model || options.model,\n                maxTokens: options.maxTokens || 2000,\n                temperature: options.temperature || 0.7,\n                systemPrompt: options.systemPrompt\n            })\n        });\n\n        if (!response.ok) {\n            let errorData = {};\n            let errorMessage = __('API request failed', 'wedocs');\n\n            try {\n                const responseText = await response.text();\n\n                // Try to parse as JSON\n                if (responseText.trim().startsWith('{')) {\n                    errorData = JSON.parse(responseText);\n                    errorMessage = errorData.message || errorData.code || errorMessage;\n                } else {\n                    // If it's HTML (like a 404 page), provide a more helpful message\n                        errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n                    }\n                } catch (parseError) {\n                    errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n                }\n\n            throw new Error(errorMessage);\n        }\n\n        const data = await response.json();\n        \n        // Return in format expected by parseResponse\n        return data;\n    }\n\n    /**\n     * Extract options from provider-specific payload\n     */\n    extractOptionsFromPayload(provider, payload) {\n        switch (provider) {\n            case 'openai':\n                return {\n                    prompt: payload.messages?.find(m => m.role === 'user')?.content || '',\n                    systemPrompt: payload.messages?.find(m => m.role === 'system')?.content || '',\n                    model: payload.model,\n                    maxTokens: payload.max_tokens,\n                    temperature: payload.temperature\n                };\n            case 'anthropic':\n                // Anthropic combines system prompt and user prompt in the message content\n                const anthropicContent = payload.messages?.[0]?.content || '';\n                const parts = anthropicContent.split('\\n\\n');\n                return {\n                    prompt: parts.slice(1).join('\\n\\n') || parts[0] || '',\n                    systemPrompt: parts[0] || '',\n                    model: payload.model,\n                    maxTokens: payload.max_tokens,\n                    temperature: payload.temperature\n                };\n            case 'google':\n                // Google combines system prompt and user prompt in the text\n                const googleText = payload.contents?.[0]?.parts?.[0]?.text || '';\n                const googleParts = googleText.split('\\n\\n');\n                return {\n                    prompt: googleParts.slice(1).join('\\n\\n') || googleParts[0] || '',\n                    systemPrompt: googleParts[0] || '',\n                    model: null, // Google model is handled separately\n                    maxTokens: payload.generationConfig?.maxOutputTokens,\n                    temperature: payload.generationConfig?.temperature\n                };\n            default:\n                return {\n                    prompt: '',\n                    systemPrompt: '',\n                    model: null,\n                    maxTokens: 2000,\n                    temperature: 0.7\n                };\n        }\n    }\n\n    /**\n     * Parse response from different providers\n     */\n    parseResponse(provider, response) {\n        switch (provider) {\n            case 'openai':\n\n            case 'anthropic':\n                return {\n                    content: response.content?.[0]?.text || '',\n                    usage: response.usage || null\n                };\n\n            case 'google':\n                return {\n                    content: response.candidates?.[0]?.content?.parts?.[0]?.text || '',\n                    usage: response.usageMetadata || null\n                };\n\n            default:\n                return {\n                    content: '',\n                    usage: null\n                };\n        }\n    }\n\n    /**\n     * Get available models for a provider\n     */\n    getProviderModels(provider) {\n        return this.providers[provider]?.models || {};\n    }\n\n    /**\n     * Validate AI settings\n     */\n    validateAiSettings(settings) {\n        const errors = [];\n\n        if (!settings.default_provider) {\n            errors.push(__('Default provider is required', 'wedocs'));\n        }\n\n        if (!this.providers[settings.default_provider]) {\n            errors.push(__('Invalid default provider', 'wedocs'));\n        }\n\n        // Validate provider configurations\n        Object.entries(settings.providers || {}).forEach(([providerKey, config]) => {\n            if (config.api_key && !this.providers[providerKey]) {\n                errors.push(`${providerKey}: ${__('Invalid provider', 'wedocs')}`);\n            }\n\n        });\n\n        return {\n            isValid: errors.length === 0,\n            errors: errors\n        };\n    }\n}\n\n// Create and export a singleton instance\nconst aiService = new AiService();\nexport default aiService;\n","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editPost\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"plugins\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["registerPlugin","AiDocWriterIcon","AiDocWriterPanel","icon","render","__","useState","useEffect","useMemo","Modal","Button","TextControl","TextareaControl","ToggleControl","Notice","Spinner","PanelBody","PanelRow","Card","CardBody","CardHeader","Flex","FlexItem","__experimentalHStack","HStack","__experimentalVStack","VStack","useSelect","useDispatch","store","editorStore","blockEditorStore","createBlock","AiDocWriterPreview","aiService","AiDocWriterModal","isOpen","onClose","title","setTitle","prompt","setPrompt","keywords","setKeywords","overwriteContent","setOverwriteContent","useExistingContent","setUseExistingContent","isGenerating","setIsGenerating","generatedContent","setGeneratedContent","showPreview","setShowPreview","error","setError","insertBlocks","replaceBlocks","insertDefaultBlock","editPost","editorData","select","getCurrentPost","getEditedPostContent","getSelectedBlockClientId","getBlocks","getSelectedBlock","getBlockInsertionPoint","getBlockOrder","post","content","selectedBlockClientId","blocks","selectedBlock","insertionPoint","blockOrder","currentPost","selectedBlockId","cursorPosition","id","contentRaw","contentRendered","hasSelection","selectedBlockIndex","indexOf","clientId","generateDynamicPrompt","docTitle","docKeywords","dynamicPrompt","replace","cleanGeneratedContent","cleaned","trim","validateGeneratedContent","errors","length","push","isValid","hasParagraphs","test","hasHeadings","dangerousPatterns","pattern","textContent","handleGenerate","aiSettings","getAiSettings","providers","default_provider","api_key","systemPrompt","enhancedPrompt","existingContentContext","selectedModel","selected_model","result","generateContent","provider","model","feature","maxTokens","temperature","Error","cleanedContent","validation","join","err","message","sanitizeContent","createContentBlocks","htmlContent","sanitizedContent","tempDiv","document","createElement","innerHTML","Array","from","children","forEach","element","tagName","toLowerCase","level","parseInt","charAt","listType","listItems","querySelectorAll","map","li","values","ordered","value","outerHTML","handleAccept","contentBlocks","blockIds","block","filter","currentBlocks","wp","data","allBlocks","allBlockIds","dispatch","handleReject","handleClose","onRequestClose","className","size","spacing","label","onChange","placeholder","help","__nextHasNoMarginBottom","__next40pxDefaultSize","rows","checked","status","isDismissible","justify","variant","onClick","disabled","Fragment","onAccept","onReject","coreStore","PluginSidebar","PluginSidebarMoreMenuItem","isModalOpen","setIsModalOpen","isViewable","postTypeName","postType","getCurrentPostType","postTypeObject","getPostType","viewable","target","name","style","padding","marginBottom","fontSize","color","width","height","fontWeight","backgroundColor","borderColor","dangerouslySetInnerHTML","__html","border","borderRadius","maxHeight","overflowY","xmlns","viewBox","fill","d","AiService","constructor","window","weDocsEditorVars","aiProviderConfigs","hooks","applyFilters","response","fetch","settings","json","ai","getDefaultAiSettings","Object","keys","providerKey","modelKeys","models","firstModel","testApiConnection","apiKey","endpoint","providerConfig","testPayload","getTestPayload","makeApiCall","success","options","restUrl","nonce","requestBody","method","credentials","headers","body","JSON","stringify","ok","errorData","errorMessage","responseText","text","startsWith","parse","code","includes","parseError","usage","listGoogleModels","url","catch","testPrompts","openai","messages","role","max_tokens","anthropic","google","contents","parts","preparePayload","basePayloads","generationConfig","maxOutputTokens","finalPayload","payload","extractOptionsFromPayload","statusText","find","m","anthropicContent","split","slice","googleText","googleParts","parseResponse","candidates","usageMetadata","getProviderModels","validateAiSettings","entries","config"],"sourceRoot":""}